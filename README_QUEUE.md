# 异步，同步执行
出现“DemoJob::dispatch() 任务直接执行了”的原因，通常是因为 .env 文件中的 QUEUE_CONNECTION 设置为 sync，这会让任务同步执行，不会进入队列。

解决方法：

打开 .env 文件，将

改为

或 database，确保你已配置好对应驱动。

保存 .env 后，运行

以刷新配置缓存。

重新访问 /dispatch-demo-job，再运行

你会看到任务被推送到队列并由 worker 消费。

如需自动化修改 .env 或有其它问题，请告知！


# 执行任务队列

在 Laravel 中，执行任务队列（即让队列中的 Job 被实际消费和运行），需要启动队列监听进程。你可以在项目根目录下运行：

如果你使用的是 redis 队列（.env 里 QUEUE_CONNECTION=redis），上述命令会自动监听 redis 队列并处理任务。

常用命令说明：

启动队列监听（推荐开发环境用）：
只处理一个任务后退出：
以守护进程方式持续运行（生产环境推荐）：
只要有 Job 被 dispatch 到队列，queue:work 进程就会自动取出并执行它们。你可以在另一个终端窗口运行该命令，观察任务被消费的过程。